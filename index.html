<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Prix Crypto en Direct</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f0f0f5; margin: 0; padding: 0; }
    header, footer { background: #222; color: #fff; text-align: center; padding: 20px; }
    .container { max-width: 1000px; margin: 30px auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px #aaa; }
    table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }
    th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
    th { background-color: #f5f5f5; }
  </style>
</head>
<body>
  <header>
    <h1>üí∏ Prix Crypto en Direct</h1>
    <p>Actualisation toutes les 60 secondes</p>
  </header>

  <div class="container">
    <table>
      <thead>
        <tr>
          <th>Crypto</th>
          <th>Bitget</th>
          <th>Kraken</th>
          <th>KuCoin</th>
          <th>Bitstamp</th>
        </tr>
      </thead>
      <tbody id="crypto-table">
        <tr>
          <td>Bitcoin (BTC)</td>
          <td id="bitget-btc">--</td>
          <td id="kraken-btc">--</td>
          <td id="kucoin-btc">--</td>
          <td id="bitstamp-btc">--</td>
        </tr>
        <tr>
          <td>Ethereum (ETH)</td>
          <td id="bitget-eth">--</td>
          <td id="kraken-eth">--</td>
          <td id="kucoin-eth">--</td>
          <td id="bitstamp-eth">--</td>
        </tr>
      </tbody>
    </table>
  </div>

  <footer>
    <p>üîÅ Donn√©es mises √† jour automatiquement depuis les APIs publiques</p>
  </footer>

  <script>
    async function fetchPrices() {
      // BITGET
      try {
        const res1 = await fetch('https://api.bitget.com/api/spot/v1/market/tickers?symbol=BTCUSDT,ETHUSDT');
        const data1 = await res1.json();
        const tickerMap = Object.fromEntries(data1.data.map(t => [t.symbol, t.last]));
        document.getElementById('bitget-btc').innerText = "$" + parseFloat(tickerMap['BTCUSDT']).toFixed(2);
        document.getElementById('bitget-eth').innerText = "$" + parseFloat(tickerMap['ETHUSDT']).toFixed(2);
      } catch (e) {
        console.error("Erreur Bitget", e);
      }

      // KRAKEN
      try {
        const res2 = await fetch('https://api.kraken.com/0/public/Ticker?pair=XBTUSD,ETHUSD');
        const data2 = await res2.json();
        document.getElementById('kraken-btc').innerText = "$" + parseFloat(data2.result.XXBTZUSD.c[0]).toFixed(2);
        document.getElementById('kraken-eth').innerText = "$" + parseFloat(data2.result.XETHZUSD.c[0]).toFixed(2);
      } catch (e) {
        console.error("Erreur Kraken", e);
      }

      // KUCOIN
      try {
        const btc = await fetch('https://api.kucoin.com/api/v1/market/orderbook/level1?symbol=BTC-USDT').then(res => res.json());
        const eth = await fetch('https://api.kucoin.com/api/v1/market/orderbook/level1?symbol=ETH-USDT').then(res => res.json());
        document.getElementById('kucoin-btc').innerText = "$" + parseFloat(btc.data.price).toFixed(2);
        document.getElementById('kucoin-eth').innerText = "$" + parseFloat(eth.data.price).toFixed(2);
      } catch (e) {
        console.error("Erreur KuCoin", e);
      }

      // BITSTAMP
      try {
        const btc = await fetch('https://www.bitstamp.net/api/v2/ticker/btcusd/').then(res => res.json());
        const eth = await fetch('https://www.bitstamp.net/api/v2/ticker/ethusd/').then(res => res.json());
        document.getElementById('bitstamp-btc').innerText = "$" + parseFloat(btc.last).toFixed(2);
        document.getElementById('bitstamp-eth').innerText = "$" + parseFloat(eth.last).toFixed(2);
      } catch (e) {
        console.error("Erreur Bitstamp", e);
      }
    }

    fetchPrices(); // premi√®re ex√©cution imm√©diate
    setInterval(fetchPrices, 60000); // toutes les 60 secondes
  </script>
</body>
</html>
